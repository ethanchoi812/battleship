!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=e=>{const t=e,r=[];return{position:t,damage:r,hit:e=>{for(let n of t)n[0]===e[0]&&n[1]===e[1]&&r.push(e)},isSunk:()=>t.length===r.length}};var o=e=>{const t=[];for(let r=0;r<e;r++){t.push([]);for(let n=0;n<e;n++)t[r].push(" ")}const r=[],o=[];return{board:t,ships:r,placeShips:o=>{let a=n(o);return r.push(a),o.forEach(r=>{if(!(r[0]<e&&r[1]<e))throw"Error: Invalid coordinate";{let e=r[0],n=r[1];t[e][n]="S"}}),r},receiveAttack:e=>{let n=e[0],a=e[1],l=t[n][a];if(l.includes("S"))t[n][a]="X",r.forEach(t=>{t.hit(e)});else{if(" "!==l)return!1;t[n][a]="M"}o.push(e)},attempts:o,allSunk:()=>{return r.every(e=>e.isSunk())}}};var a=(e,t,r)=>{const n=r,o=[],a=[],l=e=>{let t=[];for(;!d(t,e);){t=[Math.floor(Math.random()*Math.floor(n.board.length)),Math.floor(Math.random()*Math.floor(n.board.length))]}return t},d=(e,t)=>{return 2===e.length&&-1===t.findIndex(t=>t[0]===e[0]&&t[1]===e[1])};return{playerName:e,gameboard:n,type:t,makeMove:()=>{let e=l(a);return a.push(e),e},attempts:a,makeShips:e=>{for(let t=0;t<e;t++){let e=l(o);o.push(e)}return o}}};(()=>{let e,t,r=o(5),n=o(5),l=a("You","person",r),d=a("Bot","bot",n);const s=()=>{if(!0===t.gameboard.allSunk()){let t;t="bot"===e.type?`${e.playerName} wins!`:`${e.playerName} win!`,u(t)}else{let r=e;e=t,t=r,i()}},i=()=>{let r;"bot"===e.type?(r=e.makeMove(),t.gameboard.receiveAttack(r),u(),s()):"person"===e.type&&document.querySelectorAll("#bot .col").forEach(n=>{n.addEventListener("click",n=>{let o=n.target.id;""!==o&&(r=o.split("-").map(e=>Number(e)),e.attempts.push(r),t.gameboard.receiveAttack(r),u(),s())})})},u=e=>{let t=document.getElementById("display");t.innerHTML="",e=e||"",document.getElementById("message").textContent=e;let r=[l,d];for(let e of r){let r=document.createElement("div");r.classList.add("gameboard"),r.setAttribute("id",e.type);let n=e.gameboard.board.length;for(let t=0;t<n;t++){let o=document.createElement("div");o.classList.add("row");for(let r=0;r<n;r++){let n=document.createElement("span");n.classList.add("col"),n.setAttribute("id",`${t}-${r}`),"S"===e.gameboard.board[t][r]&&"person"===e.type&&n.classList.add("ship"),"M"===e.gameboard.board[t][r]&&n.classList.add("missed"),"X"===e.gameboard.board[t][r]&&n.classList.add("hit"),o.appendChild(n)}r.appendChild(o)}t.appendChild(r)}};return{setup:()=>{let r=d.makeShips(2);console.log(r),d.gameboard.placeShips(r);const n=document.querySelector("form");n.addEventListener("submit",()=>{event.preventDefault();let e=[],t=document.getElementById("add-ship").value.split(",").map(e=>Number(e));e.push(t),l.gameboard.placeShips(e),u(),document.getElementById("add-ship").value=""}),e=l,t=d;const o=document.getElementById("done");o.addEventListener("click",()=>{n.style.display="none",o.style.display="none",i()}),u()}}})().setup()}]);